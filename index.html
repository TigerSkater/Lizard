<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Lizard Button</title>
<style>
  body {
    background-color: #f0fdf4;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    overflow: hidden;
    background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='60' height='60'><text x='0' y='40' font-size='40' fill='black' opacity='0.08'>ðŸ¦Ž</text></svg>");
    background-size: 60px 60px;
    background-repeat: repeat;
  }

  #lizardButton {
    background-color: #a7f3d0;
    border: none;
    border-radius: 50%;
    width: 160px;
    height: 160px;
    font-size: 70px;
    cursor: pointer;
    box-shadow: 0 6px #059669;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
  }

  #lizardButton:active,
  #lizardButton.zoomed {
    transform: scale(1.1) translateY(4px);
    box-shadow: 0 3px #059669;
  }

  .addButtons {
    margin-top: 15px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
  }

  .addButtons button {
    background-color: #6ee7b7;
    border: none;
    padding: 10px 16px;
    font-size: 20px;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px #059669;
  }

  #counter {
    font-size: 28px;
    margin-top: 20px;
    color: #065f46;
    user-select: none;
    height: 40px;
  }

  .floatText {
    position: absolute;
    color: #065f46;
    font-weight: bold;
    font-size: 24px;
    animation: floatUp 1s ease-out forwards;
    pointer-events: none;
  }

  @keyframes floatUp {
    0% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(-40px); opacity: 0; }
  }

  .fallingLizard {
    position: absolute;
    font-size: 40px;
    animation: fall linear;
    cursor: pointer;
  }

  @keyframes fall {
    0% { transform: translateY(-50px); }
    100% { transform: translateY(110vh); }
  }

  .bouncingLizard {
    position: absolute;
    font-size: 40px;
    cursor: pointer;
    user-select: none;
    will-change: transform;
  }

  @media (max-width: 768px) {
    #lizardButton {
      width: 200px;
      height: 200px;
      font-size: 90px;
    }
  }
</style>
</head>
<body>

<button id="lizardButton" aria-label="Lizard button">ðŸ¦Ž</button>

<div class="addButtons">
  <button id="add10">+10</button>
  <button id="add100">+100</button>
  <button id="autoClick">Auto: 0/sec</button>
</div>

<div id="counter" aria-live="polite">Pressed: 0</div>

<script>
  const button = document.getElementById('lizardButton');
  const counterDisplay = document.getElementById('counter');
  const add10Btn = document.getElementById('add10');
  const add100Btn = document.getElementById('add100');
  const autoClickBtn = document.getElementById('autoClick');

  let count = 0;
  let autoClickInterval = null;
  let autoSpeedIndex = 0;
  const autoSpeeds = [0, 2, 5, 10, 20]; // clicks per second

  // Sound pool
  const soundPoolSize = 20;
  const sounds = [];
  for (let i = 0; i < soundPoolSize; i++) {
    const audio = new Audio("audio/Lizard.mp3");
    audio.preload = "auto";
    sounds.push(audio);
  }
  let soundIndex = 0;

  function playSound(times = 1) {
    for (let i = 0; i < times; i++) {
      const sound = sounds[soundIndex];
      sound.currentTime = 0;
      sound.play().catch(err => {
        console.warn('Audio playback prevented:', err);
      });
      soundIndex = (soundIndex + 1) % soundPoolSize;
    }
  }

  function updateCounter(amount) {
    count += amount;
    counterDisplay.textContent = `Pressed: ${count}`;
    showFloatingText(`+${amount}`);
  }

  function showFloatingText(text) {
    const span = document.createElement('span');
    span.className = 'floatText';
    span.textContent = text;
    const rect = button.getBoundingClientRect();
    span.style.left = (rect.left + rect.width / 2) + 'px';
    span.style.top = (rect.top - 10) + 'px';
    document.body.appendChild(span);
    setTimeout(() => span.remove(), 1000);
  }

  button.addEventListener('click', () => {
    updateCounter(1);
    playSound();
    spawnBouncingLizard();
  });

  add10Btn.addEventListener('click', () => {
    updateCounter(10);
    playSound(10);
    for (let i = 0; i < 10; i++) spawnBouncingLizard();
  });

  add100Btn.addEventListener('click', () => {
    updateCounter(100);
    playSound(100);
    for (let i = 0; i < 100; i++) spawnBouncingLizard();
  });

  // Autoclick logic
  autoClickBtn.addEventListener('click', () => {
    autoSpeedIndex = (autoSpeedIndex + 1) % autoSpeeds.length;
    const cps = autoSpeeds[autoSpeedIndex];
    autoClickBtn.textContent = `Auto: ${cps}/sec`;

    if (autoClickInterval) clearInterval(autoClickInterval);
    if (cps > 0) {
      autoClickInterval = setInterval(() => {
        button.click();
        button.classList.add('zoomed');
        setTimeout(() => button.classList.remove('zoomed'), 80);
      }, 1000 / cps);
    }
  });

  // Falling lizards
  function spawnFallingLizard() {
    const liz = document.createElement('div');
    liz.className = 'fallingLizard';
    liz.textContent = 'ðŸ¦Ž';
    liz.style.left = Math.random() * 95 + 'vw';
    liz.style.animationDuration = (5 + Math.random() * 3) + 's';
    liz.addEventListener('click', () => {
      playSound();
      liz.remove();
    });
    document.body.appendChild(liz);
    liz.addEventListener('animationend', () => liz.remove());
  }
  setInterval(spawnFallingLizard, 1500);

  // Bouncing lizards (DVD style)
  function spawnBouncingLizard() {
    const liz = document.createElement("div");
    liz.className = "bouncingLizard";
    liz.textContent = "ðŸ¦Ž";
    document.body.appendChild(liz);

    liz.style.left = Math.random() * (window.innerWidth - 40) + "px";
    liz.style.top = Math.random() * (window.innerHeight - 40) + "px";

    let dx = (Math.random() < 0.5 ? 1 : -1) * (2 + Math.random() * 3);
    let dy = (Math.random() < 0.5 ? 1 : -1) * (2 + Math.random() * 3);

    liz.addEventListener('click', () => {
      playSound();
      liz.remove();
    });

    function move() {
      let x = parseFloat(liz.style.left);
      let y = parseFloat(liz.style.top);

      if (x <= 0 || x >= window.innerWidth - 40) dx *= -1;
      if (y <= 0 || y >= window.innerHeight - 40) dy *= -1;

      liz.style.left = x + dx + "px";
      liz.style.top = y + dy + "px";

      requestAnimationFrame(move);
    }
    move();
  }
</script>

</body>
</html>
